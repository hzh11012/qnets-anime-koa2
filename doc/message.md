# 留言

## 接口前缀

```shell
http://localhost:5200/api/message
```

## 创建留言

> scope >= 1

```
POST    /create
```

### 参数说明

| 参数    | 类型           | 默认值 | 是否必填 | 说明                                 |
| ------- | -------------- | ------ | -------- | ------------------------------------ |
| type    | `number`       | -      | ✅       | 留言类型 0-咨询 1-建议 2-投诉 3-其他 |
| content | `string(1000)` | -      | ✅       | 留言内容                             |

### 成功操作返回

```json
{
    "code": 200,
    "msg": "提交留言成功"
}
```

## 留言列表 - 管理员

> scope = 3

```
POST    /admin/list
```

### 参数说明

| 参数     | 类型              | 默认值         | 是否必填 | 说明                                           |
| -------- | ----------------- | -------------- | -------- | ---------------------------------------------- |
| page     | `number`          | 1              | -        | 分页，从 1 开始                                |
| pageSize | `number`          | 10             | -        | 每页数量                                       |
| order    | `'DESC' \| 'ASC'` | `'DESC'`       | -        | 排序字段                                       |
| orderBy  | `string`          | `'created_at'` | -        | 排序方式                                       |
| type     | `number[]`        | -              | -        | 留言类型， 0-咨询 1-建议 2-投诉 3-其他         |
| status   | `number[]`        | -              | -        | 留言状态， 0-待处理 1-处理中 2-已完成 3-已关闭 |
| keyword  | `string`          | -              | -        | 搜索关键字，搜索范围为`'content'`              |

### 成功操作返回

```json
{
    "code": 200,
    "msg": "获取留言列表成功",
    "data": {
        "count": 1,
        "rows": [
            {
                "id": 18,
                "user_id": 1,
                "type": 1,
                "nickname": "日常一号突击手Mio",
                "content": "我是纠错信息",
                "reply_content": "我是回复信息",
                "status": 1,
                "created_at": "2024-11-25 19:56:35"
            }
        ]
    }
}
```

## 留言删除 - 管理员

> scope = 3

```
POST    /admin/delete
```

### 参数说明

| 参数 | 类型     | 默认值 | 是否必填 | 说明   |
| ---- | -------- | ------ | -------- | ------ |
| id   | `number` | -      | ✅       | 留言id |

### 成功操作返回

```json
{
    "code": 200,
    "msg": "删除留言成功"
}
```

## 留言修改 - 管理员

> scope = 3

```
POST    /admin/edit
```

### 参数说明

| 参数          | 类型           | 默认值 | 是否必填 | 说明                                          |
| ------------- | -------------- | ------ | -------- | --------------------------------------------- |
| id            | `number`       | -      | ✅       | 留言id                                        |
| reply_content | `string(1000)` | -      | -        | 回复内容                                      |
| status        | `number`       | -      | -        | 留言状态，0-待处理 1-处理中 2-已完成 3-已关闭 |

### 成功操作返回

```json
{
    "code": 200,
    "msg": "修改留言成功"
}
```
