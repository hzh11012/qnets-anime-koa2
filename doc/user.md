# 用户

## 接口前缀

```shell
http://localhost:5200/api/user
```

## 用户信息

> scope >= 0

```
GET    /info
```

### 参数说明

无

### 成功操作返回

```json
{
    "code": 200,
    "msg": "获取用户信息成功",
    "data": {
        "id": 1,
        "phone": "166****6241",
        "scope": 3,
        "nickname": "日常一号突击手",
        "avatar": null,
        "created_at": "2024-11-14 11:33:00"
    }
}
```

## 用户列表 - 管理员

> scope = 3

```
POST    /admin/list
```

### 参数说明

| 参数     | 类型              | 默认值         | 是否必填 | 说明                                                    |
| -------- | ----------------- | -------------- | -------- | ------------------------------------------------------- |
| page     | `number`          | 1              | -        | 分页，从 1 开始                                         |
| pageSize | `number`          | 10             | -        | 每页数量                                                |
| order    | `'DESC' \| 'ASC'` | `'DESC'`       | -        | 排序字段                                                |
| orderBy  | `string`          | `'created_at'` | -        | 排序方式                                                |
| scope    | `number[]`        | -              | -        | 用户权限，-1-封禁 0-游客 1-普通用户 2-正式会员 3-管理员 |
| keyword  | `string`          | -              | -        | 搜索关键字，搜索范围为`'nickname'`                      |

### 成功操作返回

```json
{
    "code": 200,
    "msg": "获取用户列表成功",
    "data": {
        "count": 1,
        "rows": [
            {
                "id": 1,
                "phone": "166****6241",
                "nickname": "日常一号突击手",
                "avatar": null,
                "scope": 2,
                "created_at": "2024-11-14 11:33:00"
            }
        ]
    }
}
```

## 用户删除 - 管理员

> scope = 3

```
POST    /admin/delete
```

### 参数说明

| 参数 | 类型     | 默认值 | 是否必填 | 说明   |
| ---- | -------- | ------ | -------- | ------ |
| id   | `number` | -      | ✅       | 用户id |

### 成功操作返回

```json
{
    "code": 200,
    "msg": "删除用户成功"
}
```

## 用户修改 - 管理员

> scope = 3

```
POST    /admin/edit
```

### 参数说明

| 参数     | 类型     | 默认值 | 是否必填 | 说明     |
| -------- | -------- | ------ | -------- | -------- |
| id       | `number` | -      | ✅       | 用户id   |
| nickname | `string` | -      | -        | 用户昵称 |
| avatar   | `string` | -      | -        | 用户头像 |
| scope    | `number` | -      | -        | 用户权限 |

### 成功操作返回

```json
{
    "code": 200,
    "msg": "修改用户信息成功"
}
```

## 用户修改

> scope >= 1

```
POST    /edit
```

### 参数说明

| 参数     | 类型     | 默认值 | 是否必填 | 说明     |
| -------- | -------- | ------ | -------- | -------- |
| nickname | `string` | -      | -        | 用户昵称 |
| avatar   | `string` | -      | -        | 用户头像 |

### 成功操作返回

```json
{
    "code": 200,
    "msg": "修改信息成功"
}
```
